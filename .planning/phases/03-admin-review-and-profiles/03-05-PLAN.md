---
phase: 03-admin-review-and-profiles
plan: 05
type: execute
wave: 4
depends_on: ["03-04"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Admin sees a review queue of parsed profiles sorted by those needing attention (low-confidence fields first)"
    - "Admin can view parsed data side-by-side with the original PDF CV and correct any extraction errors"
    - "Admin can approve a profile to make it live, or reject it with notes for re-processing"
    - "Admin can edit any field on any candidate profile at any time (not just during initial review)"
    - "Admin can see all candidate profiles in a searchable, sortable list with status indicators (pending review, active, rejected)"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete Phase 3 admin review and profile management system works end-to-end.

Purpose: Human verification of the full review workflow before moving to Phase 4 (Employer Onboarding). This ensures data quality tools are working before employer-facing features exist.

Output: Confirmed working review system or identified issues for gap closure.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-admin-review-and-profiles/03-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run build and verify no errors</name>
  <files></files>
  <action>
Run `npm run build` to verify the entire application builds without errors. Fix any build errors found.

Also run `npx drizzle-kit push` to remind the user that the schema needs to be pushed if not already done (the schema was extended in Plan 01 with new columns and enum).

Check that all expected routes exist:
- /admin/candidates (list page)
- /admin/candidates/[id] (detail page)
  </action>
  <verify>
  - `npm run build` exits with code 0
  - Build output shows /admin/candidates and /admin/candidates/[id] routes
  </verify>
  <done>
  - Application builds successfully
  - All Phase 3 routes are compiled
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete admin review and profile management system:
1. Candidate list page (/admin/candidates) with search, filter by status, sortable columns, pagination, and confidence-based attention sorting
2. Profile detail page (/admin/candidates/[id]) with side-by-side PDF + data view, inline editing for all fields, and approve/reject actions
3. Status tracking (pending_review -> active/rejected) with review timestamps
4. Confidence badges on every parsed field (high=green, medium=amber, low=red)
5. Profile status badges (Pending Review, Active, Rejected)
  </what-built>
  <how-to-verify>
**Prerequisites:** You need at least one parsed CV in the database from Phase 2. If you haven't run `npx drizzle-kit push` since Phase 3 plans were executed, do so now (new columns were added to profiles table).

1. Start the dev server: `npm run dev`
2. Log in as admin and navigate to /admin/candidates

**Candidate List (Success Criteria #5):**
3. Verify you see a table with columns: Name, Status, Attention, Specializations, Added
4. Verify all profiles show "Pending Review" status (they haven't been reviewed yet)
5. Try typing in the search box -- table should filter by name/email
6. Try the status dropdown filter -- should filter by status
7. Click column headers to sort. Click "Attention" header -- low-confidence profiles should appear first

**Profile Detail (Success Criteria #2, #4):**
8. Click a candidate name to navigate to their detail page
9. Verify you see the original PDF on the left and parsed data on the right (if CV exists)
10. Verify all sections are visible: Contact Info, Specializations, Education, Work History, Technical Domains, Bar Admissions
11. Verify each field shows a confidence badge

**Inline Editing (Success Criteria #4):**
12. Click on a name/email/phone field -- it should become editable
13. Change the value and press Enter -- it should save and the confidence badge should turn green (high)
14. Click a field, change value, press Escape -- it should revert to original value
15. Try editing an education entry field (institution, degree, etc.)

**Approve/Reject (Success Criteria #3):**
16. Click the Approve button on a pending profile -- status should change to "Active"
17. Go back to candidate list -- verify the status badge updated
18. Open another profile and click Reject -- a dialog should appear asking for rejection notes
19. Enter rejection notes and confirm -- status should change to "Rejected"
20. Go back to candidate list -- verify both approved and rejected profiles show correct statuses

**Review Queue (Success Criteria #1):**
21. On the candidate list, filter by "Pending Review" status -- this is effectively the review queue
22. Sort by Attention column -- low-confidence profiles should appear first
  </how-to-verify>
  <resume-signal>Type "approved" if everything works, or describe any issues you found</resume-signal>
</task>

</tasks>

<verification>
All 5 success criteria from the phase roadmap are verified by the human checkpoint.
</verification>

<success_criteria>
- User confirms all 5 success criteria pass
- No build errors
- Full review workflow functional end-to-end
</success_criteria>

<output>
After completion, create `.planning/phases/03-admin-review-and-profiles/03-05-SUMMARY.md`
</output>
